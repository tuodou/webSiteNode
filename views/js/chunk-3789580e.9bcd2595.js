(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3789580e"],{"14e1":function(t,e,i){"use strict";var o=i("331f"),a=i.n(o);a.a},"331f":function(t,e,i){},7364:function(t,e,i){var o=i("ddf7").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in a||i("dad2")&&o(a,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},ead4:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add"},[i("div",{staticClass:"blog-info"},[i("p",{staticClass:"title item"},[t._v("\n      文章标题："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.title,expression:"blog.title"}],attrs:{type:"text",placeholder:"请输入文章标题"},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value)}}})]),i("p",{staticClass:"classify item"},[t._v("\n      文章分类："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.classify,expression:"blog.classify"}],attrs:{type:"text",placeholder:"请输入文章分类"},domProps:{value:t.blog.classify},on:{input:function(e){e.target.composing||t.$set(t.blog,"classify",e.target.value)}}})]),i("p",{staticClass:"auth item"},[t._v("\n      文章作者："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.auth,expression:"blog.auth"}],attrs:{type:"text",placeholder:"请输入文章作者"},domProps:{value:t.blog.auth},on:{input:function(e){e.target.composing||t.$set(t.blog,"auth",e.target.value)}}})]),i("p",{staticClass:"brief item"},[t._v("\n      文章简介："),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blog.brief,expression:"blog.brief"}],staticStyle:{width:"700px"},attrs:{type:"text",rows:"7",maxlength:"300",placeholder:"请输入文章简介"},domProps:{value:t.blog.brief},on:{input:function(e){e.target.composing||t.$set(t.blog,"brief",e.target.value)}}})]),i("div",{staticClass:"blog-img item"},[t._v("\n      封面图片："),i("input",{attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:function(e){return t.uploadImage(e.target.files[0])}}}),i("div",{staticClass:"img"},[t.blog.img?i("img",{attrs:{src:t.blog.img}}):t._e()])]),i("div",{staticClass:"common-btn active",staticStyle:{margin:"20px 0"},on:{click:t.submitBlog}},[t._v("提交")])]),i("mavon-editor",{ref:"md",attrs:{placeholder:"是时候写一篇博客了"},on:{imgAdd:t.addImage,imgDel:t.delImage},model:{value:t.blog.detail,callback:function(e){t.$set(t.blog,"detail",e)},expression:"blog.detail"}}),i("div",{staticClass:"common-btn active",staticStyle:{margin:"20px 0"},on:{click:t.submitBlog}},[t._v("提交")])],1)},a=[],n=(i("7364"),i("be3b")),l=function(t){return console.log(t),Object(n["a"])("/upload/image",t)},s=function(t,e,i){console.log(333,t);var o=new FileReader;o.readAsDataURL(t),o.onload=function(t){var o=new FormData;o.append("image",t.target.result),o.append("fileName",e),i(l(o))}},c=i("864d"),r={name:"addBlog",data:function(){return{isEdit:!1,blog:{title:"",img:"",auth:"",brief:"",classify:"",detail:""}}},created:function(){this.initBlog()},beforeRouteLeave:function(t,e,i){console.log(t,e),this.isEdit&&"detail"===t.name&&(t.query.id=this.id),i()},methods:{initBlog:function(){var t=this,e=this.$route.query.id;e&&(this.isEdit=!0,this.id=+e,Object(c["b"])({id:e}).then((function(e){t.blog=e})).catch((function(t){console.log(t)})))},submitBlog:function(){var t=this,e=this.isEdit?c["e"]:c["addArticalApi"];e(this.blog).then((function(e){console.log(e),t.isEdit?t.$router.back():t.blog={title:"",img:"",auth:"",brief:"",classify:"",detail:""}})).catch((function(t){console.log(t)}))},addImage:function(t,e){var i=this;s(e,"blog_content_image",(function(e){e.then((function(e){i.$refs.md.$img2Url(t,e.path)})).catch((function(t){console.log(t)}))}))},delImage:function(t){console.log(t)},uploadImage:function(t){var e=this;s(t,"blog_img",(function(t){t.then((function(t){e.blog.img=t.path})).catch((function(t){console.log(t)}))}))}}},u=r,g=(i("14e1"),i("6691")),d=Object(g["a"])(u,o,a,!1,null,"1dbc62ea",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-3789580e.9bcd2595.js.map